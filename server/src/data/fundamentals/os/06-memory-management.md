# Chapter 6: Memory Management

## 6.1 Basic Hardware
*   **Main Memory** and **Registers** are the only storage CPU can access directly.
*   **Cache**: Sits between CPU and Main Memory.
*   **Protection**: Base and Limit Registers define the logical address space of a process. CPU checks every address generated in user mode against these.

---

## 6.2 Address Binding
Binding instructions/data to memory addresses.
1.  **Compile Time**: If you know where process will be in memory in advance -> **Absolute Code**.
2.  **Load Time**: If not known -> **Relocatable Code**.
3.  **Execution Time**: Binding delayed until runtime. (Used by Virtual Memory).

**Logical vs Physical Address**:
*   **Logical (Virtual)**: Generated by CPU.
*   **Physical**: Address seen by Memory Unit.
*   **MMU (Memory Management Unit)**: Hardware that maps Logical -> Physical. Typically adds value in Relocation Register.

---

## 6.3 Contiguous Memory Allocation
Main memory usually into two partitions: OS (Low memory) and User Processes (High memory).

### 6.3.1 Fragmentation
1.  **External Fragmentation**: Total memory space exists to satisfy a request, but it is not contiguous.
    *   *Solution*: **Compaction** (Shuffle memory to place fee holes together). Slow.
2.  **Internal Fragmentation**: Allocated memory may be slightly larger than requested memory.

---

## 6.4 Paging (Non-Contiguous Allocation)
The physical address space of a process can be non-contiguous.

### 6.4.1 Method
*   Divide **Physical Memory** into fixed-sized blocks called **Frames**.
*   Divide **Logical Memory** into same-sized blocks called **Pages**.
*   **Page Table**: Contains base address of each page in physical memory.

### 6.4.2 Address Translation
Address generated by CPU divided into:
*   **Page Number (p)**: Index to Page Table.
*   **Page Offset (d)**: Displacement within the page.

Physical Address = `(Frame Number * Frame Size) + Offset`

### 6.4.3 TLB (Translation Lookaside Buffer)
Page Table is stored in RAM (Slow access).
TLB is a small, fast lookup hardware cache.
*   **Effective Access Time (EAT)**:
    *   $\alpha$ = Hit Ratio.
    *   $\epsilon$ = Associative Lookup time.
    *   $t$ = Memory Access time.
    *   $EAT = (t + \epsilon)\alpha + (2t + \epsilon)(1-\alpha)$.

---

## 6.5 Segmentation
Memory management scheme that supports user view of memory.
A program is a collection of segments: `main()`, `stack`, `sqrt()`.
*   <Segment-Number, Offset>.
*   Uses **Segment Table** (Limit and Base).
